10/20(목) - ㅅㅂ 어제 풍형 방송보다가 4시에 잤음..


오늘은 카메라~
디버그 카메라, 줄여서 디캠이라는 거슬? 갑니다?

허미쉽펄이거책에44장으로아예따로있었네ㄷㄷ 
개발을 할 때는 고정카메라를 4개정도 쓰게 됩니다 

오일러 각? -> 요(헤드) 피치 롤 // 이건 좌표계가 어떻게 되어있던, 기저가 어떻게 되어있던 무조건 동일하다
서순 국룰은 Z(롤) -> X(피치) -> Y(요) , 왜냐? 일반적인 게임에서는 Z회전을 거의 안쓰거덩 
사실 행렬은 교환법칙이 성립하질 않아서 원하는 대로 서순을 써도 괜찮다(반대아님?), 암튼 국룰이 위에꺼

쿼터니언?(사원수) 드디어 언급 나왔다 ㄷㄷ 근데 나중에

특정 행렬이 넘어오면 그 행렬을 분해해서 오일러 각을 얻어낼 줄도 알아야한다 (왜요?;;)

카메라를 회전시키는 게 아니라 오브젝트를 회전시켜서 어쩌구저쩌구 생각할 수 있어야 한다-> 근데 그거 뷰행렬인가 투영행렬인가 할때 실제로 코드에 넣지 않았음?

오늘부터 코딩 안해줍니다, 지금 이걸로 끝이야
ㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷㄷ

임의의 축의 회전 -> xyz축을 포함한 나머지? (ex - x축 회전은 1,0,0 기준으로 회전한거)
임의의 축의 회전 공식이 사원수의 회전행렬 공식과 거의 유사, 그래서 나중엔 사원수의 

공부할 때는 어 저게 왜 저렇게 되어있지? 저 공식이 어떻게 생긴거야? 이런게 중요하다... 내가 안하는거네!

아무튼 이제 1인칭 카메라, 갑자기 쿼터니언(사원수) 등장했는디? 벌써나오는겨?

회전 중심을 사용한 회전 행렬 생성 -> 나는 뭐 캐릭터의 발바닥 중심으로 회전주고 싶어 이럴때
지금 회전 중심은 원점(0,0,0)이다

행렬로부터 각정 회전 정보 얻기 -> 어케함?



아무튼 그래서 등장하는게 사원수 (쿼터니언)

사원수가 뭐느느냐 -> 실수와 허수 3개를 결합한 것

4x4 행렬이 아니라 실수 4개만 가지고도 회전을 줄 수 있다 -> 메모리가 엄청나게 절약된다
오일러 각으로 회전주다보면 발생할 수 있는 짐벌락을 방지할 수 있다
짐벌락 -> 축 두개가 겹쳐서 나머지 한 축의 자유도가 상실되는 경우 (평생 이해못할듯ㅋㅋ)

허수라는걸 알려면 복소수라는걸 알아야한다
복소수가 왜등장했을까? i제곱 + 3 = 0 -> i가 머임? 그전까지의 수학에서는 있을수가 없었다, 그래서 새로운 개념을 만든 것
복소수 평면의 등장, 어떤 점 하나를 복소수로 표현이 가능하다 
실수+허수 하나로 2차원 회전이 가능했었음, 실수+허수 2개로 3차원 회전 만들라고 했는데 실패, 실수+허수3개 쓰니까 3차원 회전 비스무리한거 만드는 데 성공!
사원수에 대한 수학적인 의미 -> 사실 몰라도 돼요! 
사실 사원수에서도 스케일이 들어가는데, 무조건 1로 놓고 쓴다(단위 사원수). 왜? 그야 여기저기서 스케일해버리면 야랄나니까
사원수의 성질 -> 옘병ㅋㅋ 외워야함?
사원수의 곱셈은 회전의 덧셈과 같다

회전에서는 무조건 사원수라고 보면 된다..

사원수는 쉐이더에 못넘김, 쉐이더에는 벡터랑 행렬만 넘길 수 있다
그래서 사원수를 행렬로 변환해서 넘겨야함 -> 사원수를 행렬로, 행렬을 사원수로 바꿀 수 있어야

사원수의 보간? 에?


옘병 뭐가이렇게만ㄹ아
뭔지 알고 쓰기만 해도 대단한 거다... 하지만 센세의 요구->근데 뭔지 알아? 그럼 구현해!

DX의 수학갖고 언리얼에서 못쓴다(좌표계가 다르기 때문에), 그니까 뭔진 알아야 할것

50강 빽 뷰 카메라까지 가면 보간도 들어가고 막 그런다

카메라 프로스텀..		// 프로스텀이 뭐임? 아주부 프로스트? 프로스트펑크?
프로스텀을 만드는거랑 제외처리를 하는건 별개다
난이도가 좀 있지만 반드시 알아야 하는것 -> OBB		// 밴 브로드님.. 그립읍니다..
기울어져 있는걸 OBB라고 한다 

행렬성분을 분해해서 직접 프로스텀 평면을 구축할 수 있따 


그래서 44장 ~ 52장 까징이 카메라에 대한 정보 

선생님진도가너무너무너무너무빠릅니다
선생님 코드(옛날코드)에 카메라 1~5? 거기에 있다
옛날 코드에 TBasisLib를 빌드해야 돌아갈것이다

카메라 1에서 가져올 거? 아직 안한거?
1. 라인 뿌리기 (월드의 기저축 눈에 보이게) -> 라인 뿌릴때는 토플로지를 라인으로 바꿨다가, 다음 프레임 올 때는 또 트라이앵글로 바꿔줘야하ㅓ고... 그것만하면된다?
2. 뷰포트 설정 (4개 혹은 +a)

카메라 2에서는 마우스로 드래그하면 카메라가 회전되는 거시다, 
근데 여기서는 드래그할때 회전을 월드 기저축 기준으로 회전중이다 

D3DX Math가 10까지는 있었는데 삭제되뿠따, 그리고 XM Math가 생겼다
그래서 선생님코드 껍데기는 전자인데 내용물은 후자다 

지금 나와있는 엔진들은 다 레지스터를 이용해서 하나의 명령으로 다수의 실행결과를 받아오는 그런게 있따, XM Math도 그렇다


어.. 코딩 안해주신다며요 ㅋㅋ 아싸
암튼 선생님 지금코드에 라인 추가하는 작업 하시는듯 (월드의 기저축 눈에 보이게)
엄.. 씬(부모) 에 카메라 추가해서 커렌트씬으로 접근할수 있게끔.. 근데 ㅓㅈ거 필요한가??	
원래 카메라를 카메라디버그로 바꾸고, 카메라디버그가 원래 카메라를 상속하게끔
쉐이더도 좀 만져서 텍스처가 아니라 그냥 색깔만 리턴하도록 하나 추가
근데 크리에이트 쉐이더에서 PS VS 고정이 아니라 다른것도 받을 수 있게 해줘야 하는데, 
지금은 바쁘니까 그냥 쉐이더파일을 복붙해서 컬러만 리턴하는놈으로 새로 만듬
라인을 상속하는 쉐이프디렉션라인을 새로맹글어가 정점을 6개만들고 한번에뿌리게끔?
아무튼 월드 기저축은 잘 되니까, 이제 오브젝트의 기저축을 뿌려보것다 (기저축이 될라면 세개 있어야 하는게? 방향ㅇ인가?) 
모든 오브젝트에다가 디렉션 라인을 하나씩 갖고있게 하자 -> 쉬는시간 포함 이거저거 하셨는데, 뭐 나는 내꼴리는대로 하던가말던가
뭐 아무튼 그냥 오브젝트가 바라보는 방향 벡터를 연장한 선이 뻗어나가면 된다는 거잖여, 구조를 어떻게 하든 결과만 나오면 OK 아녀?	// 아 기저축 맞네


지금 베이스 오브젝트도 예전 2dObject마냥 vPos (위치)를 가지고 있어야한다 (월드행렬의 _41, _42, _43 너어줌)
어.. 3D 오브젝트가 Look, Up, Right라는 벡터 세개를 갖고있어야?한다?
카메라 클래스에 업데이트라는 함수도 하나 추가?
몬가..몬가엄청하셧는데.. 아무튼 지금은 카메라 위치는 이동하는데 카메라 시점은 고정인 상태 (맞?나?)
어.. 그래 지금 오브젝트 주위를 회전하고 있는데 D키를 누르면 Right 벡터가 이동한다?
뭔? 얘기지? 코드를 좀 봐야하나? 모르겠네? 뭐가 어떻게 돌아가고 있는거지?
아 Right 벡터 방향으로 움직이고 있는건데, 자세한 건 노트참고(2p) 

카메라를 직접 움직이지 않고 회전을 줄거다?
요 피치 롤, 오일러 각도 그거쓰시려는?건가?
그... 신규 카메라 위치를 만든다? 거리(D)를 맘대로 조절할 수 있다?
존나 메모장에 근성체가 가득하다? 근성이 최고다? 우와아아앙?

오브젝트의 z축을 xy뭐시기던 아무튼 회전을 주고?(오브젝터의 기저벡터를?)
회전된 오브젝트의 z축 정반대쪽에 거리(D)만큼 떨어진 곳을 카메라의 위치로 정한다?
마우스 휠을 이용해서 저 거리를 조정할 수가 있을것이다,, 
모델 뷰 카메라를 쓸때는 이거를 가장 많이이이쓴다
 
그러므로 기저벡터 두개를 만들거다(월드업, 월드룩)
매트릭스라는거슬 하나를 만들거다, 여따가 회전에 관련된 결과를 RotationYawPitchRoll(오일러각) 이런 함수로 줄거다
아니근데왜굳이요피치롤을?그냥지금까지했던거갖다쓰면안되는거야?어차피짐벌락걸리는건똑같은거아님?

수학라이브러리를 하나 붙여줄거다, 이제부터는 활용을 쪼끔 할거시다
TMath라는 라이브러리.. 겠찌?

아무튼 D3DXMatrixRotationYawPitchRoll 
앞으로는 저거 뭐시기 TMath에 있는것들을 자주 가져다가 쓸것이다..
아니뭐야그러면시발사원수고나발이고그냥갖다쓴다는얘기아니오?


아니 그리고 결국 카메라 위치가 바뀌는건 똑같지않음?? 원하는 각도만큼 돌릴 수 있다는게 다른건가?
그전까지 썼던거랑 요피치롤이랑 대체 뭐가 다른거지?? 
요 피치 롤을 멤버변수로 놓고 누적이 가능하게 하려고? 

행렬은 세네개씩 회전하고 그러면 머릿속에서 전혀 상상이 안 된다, 
근데 사원수는 어떻게 돌지 우리가 대충 감을 잡을수가 있다 (ㄹㅇ?)

오프셋은 또 뭐야 인풋에 뭔가 추가된 것 같은데
아 드래그.. 드래그는 또 내가 구현해본 적이 있지
아무튼 지금은 오브젝트 회전행렬을 가지고 카메라의 위치에다가 세팅을 한거시다
그래서 x축이나 y축 한쪽으로만 돌리면 이쁘게 잘 도는데, 중간에 다른축으로 돌리면 바로 야랄난다

월드에서 회전되는거랑 카메라에서 회전되는거랑은 완전히 다른거다
어.. 저거 카메라4 저게 진짜 모델뷰다, 저걸 목표로 해야하려나?
저게 되려면 그건가 그거? 임의의 축 회전? 아님말고
아니지 잠깐만 저것도 아닌가본데? 가만히 서서 고개돌리고 z축방향으로 앞뒤전후진 하는게 진짜 디버그카메란가?
아 ㅋㅋ 윗줄은 디버그 카메라, 카메라4는 모델뷰 카메라

와 TMath에서 사원수 뽑아오셨따
지금은 혼용해서 쓰는데 쪼꼼 시간이 지나면 다 TMath에서 갖고올것이다,,
아직까지는 그냥 사원수를 통해서 회전행렬이 만들어진다 대충 이렇게 이해하고 있으면 된다
디버그카메라를 만들것이다 라는것이 핵심이다

요피치롤로 행렬이 아니라 사원수를 만들었다, 그거로 디버그카메라를 만들었다 (행렬로 만들면 저러케 안된다, 그 뭐시기 짐벌락때문인가)
저까지 갈라믄 한참남긴 했는데 일단 빨리빨리 눈에 보이게끔 해야하니까 일단 라이브러리에서 다 갖다씄따




미리얘기할게요? 이제부터는진도가? 엄청나게빠를거에요?
지하철 끊기기 전에 집에 못갈것이다? 같이 뭉쳐서 같이 해야한다? 
아니 선생님 워라밸이라고 그런거 못들어보셨나요 하긴 시발 학생새끼들한테 인권이어딧겟어 ㅠㅠ