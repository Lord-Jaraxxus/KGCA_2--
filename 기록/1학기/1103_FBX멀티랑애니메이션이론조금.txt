11/3 (목) - 

오늘 한거

1. FBX 멀티? 애니메이션? 암튼 기초작업
2. 애니메이션 이론

배 띄울려고 봤더니 텍스처가 읎어서 안뜸 
다이렉트 10부터 tga를 지원을 안해서 이름을 dds로 바꿔놓으셨었다 
지금은 또 지원을 하나? 안되나보네; 이미지를 인식할 수 없습니다~
다이렉트 툴킷에서는 tga파일이 처리가 안되는디, 다이렉트X 텍스처에서는 된다
근데 우리가 지금 쓰는건 툴킷임 (dxTK)

그래서 저기 스플릿네임에서 확장자를 +하기 전에 tga면 dds로 바꾸게끔? 했음
근데 왜 난 안됨?????? 왜 같다고 인식을 못함??
아 이제 되네, 저렇게 새로만들고 거따넣어놔야 비교가 제대로 되는건가? 참, 문자열의 세계란..

아무튼 이제 멀티 오브젝트? 그런 fbx파일을 하시나
포탑 ㄷㄷ 메쉬만 8개, 본?이 스무개가 넘음 ㄷㄷ 

아무튼 그 포탑을 지금코드로 읽으려 했더니 뻑난다, 웨지? 뭣때문이었더라; 텍스처를 못읽던가 아님 텍스처가 없던가
헬퍼 오브젝트가 없다?

지오메트리 오브젝트랑 헬퍼 오브젝트가 반드시 있어야한다, 카메라랑 라이트는 그냥 게임카메라 게임라이트 쓰면되고

아무튼 저 터렛을 띄울 수만 있으면 거의 모든 FBX 오브젝트를 다룰 수 있을것
온갖 편법으로 디버그를 안하면 안뜨게끔 만들어놓으셨다, 와...
정석적인 FBX 로더를 만들어도 그걸로도 띄울수 없게끔 해놓으셨따 ㄷㄷ;ㄷ;;;; 

이야.. 총체적 난국이네 (물감만 풀어놓고 안쓴것때문에?)
서브메테리얼 중에서 한번도 안쓴게 있다, 얘들을 걸러낼 모몬가가 필요




잠깐 문서를 볼게요, 애니메이션에 대한 이해가 필요합니다

어.. 맥스는 기본적으로 프레임이라는 단위가 있고 틱이라는 단위가 있다
맥스에서는 30프레임이 1초다 
프레임 밑에 틱카운터라는게 있다, 1프레임은 160틱
즉 1초 -> 30프레임 -> 4800틱 

srt 따로따로 보간을 해야 한다.. 거기에 부모행렬을 곱한게 최종 결과값?
어........지럽네 뭘 받아적어야 할지도 모르겠어

아무튼 저기서 하고있는건 선형 보간인데(기본)
곡선 보간이 있다? 어떤 곡선 알고리즘을 썼느느냐에 따라서 현재 애니메이션 행렬을 얻는 방법이 결정난다
그래서 곡선 알고리즘이 뭔데? -> ㄹㅇ ㅋㅋ
지금 저기로 빠지면 배가 산으로 간다, 하기는 해야 하는데..
그러므로 지금은 맛만 보여준다,, 
곡선의 파형은 어떤 곡선 알고리즘을 썼느냐에 따라서 완전히 달라진다

샘플링 애니메이션 / 키 프레임 애니메이션 
샘플링 -> 원하는 간격으로 표본을 추출해내는거, 키가 누락되지 않도록 주의 
키 프레임 -> 키 (아마 값이 변하는 전환점 같은느낌) 만 받아와서 그거로 보간

근데 일반적으로 키 프레임을 안쓰고 샘플링을 쓴다, 왜? -> 곡선 보간 처리를 안해도 된다 
그냥 곡선 보간 처리를 안하고 죄다 선형 보간으로 때려도 대충 원하는 느낌으로 나온다 


멀티 애니메이션 들어갑니다, 피봇, 헬퍼 오브젝트(본, 더미, 바이패드)

일단 피벗부터, 피벗 -> 로컬 원점, 로테이션 센터?
상속관계에서는 어떤 역할을 하는지를 이해해야 한다

디자이너가 만든 모델링의 피벗이 어떻게 되어있던 프로그래머가 원하는 위치로 바꿔서 쓸 수 있어야 한다
그때 사용하는 것이 더미 오브젝트, 부모 자식의 피벗이 어떻게 되어있던 내가 원하는 작업을 할 수 있게 된다 

구 -> 박스 // 구 -> 더미 오브젝트 -> 박스
더미 오브젝트는 3d로 치면 점이다, 렌더링할 대상은 아님
더미 오브젝트를 를 를 

본 오브젝트 -> 뼈대 

헬퍼 오브젝트 -> 애니메이션을 하기 위한 도우미 오브젝트
헬퍼 오브젝트는 애니메이션 데이터(행렬)만 갖고있다, 메쉬가 없다   
아무튼 우리가 애니메이션을 할라면 헬퍼 오브젝트를 빼놓으면 안된다




이제 다시 코딩으로 돌아가서, Fbx오브젝트가 등치가 좀 커졌으니까 따로 클래스 파일로 뺀다
FbXNode를 다 저장할수 있게 리스트를 하나 만들고 PreProcess에서 노드도 다 푸쉬백을 한다
노드는 34개인데 메쉬는 8개,  나머지는 헬퍼 or 카메라 or 라이트 기타등등이었다

PreProcess에서 제외를 몇개 좀 하겠다, 카메라 오브젝트랑 라이트 오브젝트는 제외해버리겠다 
그럼 남는건 지오메트리(기본?), 쉐이프(얘는뭐냐), 헬퍼 일케 남는다
노드의 속성을 갖고올 수 있다, 지금까지는 eMesh만 썼었는데 애니메이션을 할라믄 eSkeleton 이게 필요하다
eNull도 뭐 있어야하긴 하는데 스켈레톤만 있으면 앵간한건 다 되니까 일단 넘어가고
가 아니라 지금 넣어야하네? eNull이 최상위 부모라서 넣어놔야한다;

헬퍼 밑에 지오메트리가 있을수도, 지오메트리 밑에 헬퍼가 있을수도 있다.. ;;
부모자식 관계를 구축할 수도 있따? 

어........ 부모가 있어야한다??
그래서 TbxObject에 m_pParent랑 m_pChilds를 추가한다 
void SetParent도 만들어주고,, 
FbxNode도 저장하고 있는게 좋다? 나중에 이걸로 이것저것 찾아낼 수가 있다
그리고 노드의 부모 노드도 저장하고 있는것이 좋다

ㅋㅋㅋ내가지금졸려서그런건가뭐가뭔지뭐가어떻게돌아가는지전혀모르곘는데
노드랑오브젝트구조를정확히몰라서그런건가?

아무튼 오브젝트마다 이름도 W_STR로 넣어주고.. 부모 이름도 넣어줘? -> 아 이건 Object3D에서 
아오 진짜 미치겠네 왤케왤케임..

프리프로세스 안에서 다 해도 되고 밖에서 해도 된다,,

검색은 맵으로 했다? 에?
이부분잘이해가안되는데난그냥오브젝트리스트일일히돌면안됨? 로딩시간길어지던말던ㅅㅂ

오브젝트도 서브메테리얼마냥 물감 풀어놓고 안쓴게 있을 수 있다
헬퍼오브젝트이면서 상속관계가 없는놈 -> 풀어놓고 안쓴 물감
그 모든 오브젝트가 부모, 최상위 루트로 들어갔다


선생님 소스랑 똑같아지면 안된다? 그쵸? 저도 그렇게생각해요 
일정 수준 지나면 의사코드 넣듯이 할거임

상속관계 구축하고 메쉬면 뽑고 -> 결국 오늘 코드치신게 이건가?


