11/18(금) - 일찍좀자자영민아


오늘 한거 대충 요약하자면 맵(랜드스케이프) 만드는 방법 +a랑



오늘은 dx하신다고안하셨었나 ㅋㅋ
-> 하시겠는데? 입이 방정이쥬?




랜드스케이프 만들어놓고 빌리지 가져오면서 시작

콘텐츠 브라우저에서 우클릭 -> 폴리지  
가면 세가지 있는데 셋다 쓸 줄 알아야?한다

머터리얼 폴더 만들고 머터리얼 하나 암거나 만들고 설정? 블루프린트? 암튼 거기 가서
우클릭하고 검색해서 레이어 블렌드(블렌드는 기본적으로 있어야 한다?), LandscapeCoords(이건 뭔지 몰르겠네), 텍스처(여기선 4개) 

레이어 블렌드에선 레이어 이름이랑 블렌드 타입이 중요하다 
블렌드 타입을 일단은 가중치? 그걸로 하고 레이어 4개(이름은 일단 ABCD로) 해놓고 레이어 블렌드에다가 이어준?다

가중치 정보를 저장하는 레이어 인포가 반드시 필요하다
위에서부터가 렌더 서순? 마우스로 뿌리니까 뭐.. 무ㅓ요? 

아무튼 이런식으로 하면 렌드스케이프에 하나의 머터리얼로 여러개의 텍스처를 붙일?수있다인감 -> 맞는듯ㅇㅇ





오늘의 핵심은 만들어놓은 랜드스케이프에 빌리지랑 글래스를 갖다놓는 것이다

-폴리지 
랜드스케이프 그래스 타입 ->
스태틱 메쉬 폴리지 ->
액터 폴리지 ->

폴리지에는 스태틱 메시 폴리지랑 액터 폴리지, 그리고 FBX만 올라갈 수 있다
근데 그래스타입은 못올라간다

FBX만 뿌려도 되는데 왜 액터랑 스태틱메시를 올라갈 수 있게 만들었을까를 생각해봐야한다
 -> 그래서 왜임?

레벨에 배치할 때 스케일을 랜덤으로 줘서 뿌릴 수도 있다 (크기가 들쭉날쭉하게끔) 

요거랑 요거랑 공유가 된다? 그래서 요거랑 요게 뭐죠;; 
페인팅만 공유가 안된다?


액터 폴리지는 디테일에 액터가 들어간다
액터가 들어간다 -> 코딩을 할수있다 (프로그램이 들어갈 수 있다)
블루프린트로 액터 클래스 하나 만들고 걔를 액터 폴리지 디테일에서 액터로 설정해놓음

지금은 충돌이 없다, 보통 발목보다 높으면 충돌을 주는게 좋것지
메시 에디터 가서 보면 콜리전이라는게 있다 (어떻게 드가셨지? 우클릭?)
보통 박스를 많이 사용을 하게 될 것 (박스 컨벡스로 변환)
자동.. 컨벡스 콜리전 -> 아마 메쉬 작업했던 사람이 미리 잡아놓은 충돌범위, 이게 제일 좋긴 하다
아무튼 바꿔놓고 저장 하면 충돌 데이터가 생김, 근데 충돌이 없다 
디테일 창 -> 인스턴스 세팅 -> 콜리전 프리셋 	// 여기서 바꿀 수 있음
블록하고 오버랩만 구분할 수 있으면 된다 (블록 - 못지나감, 오버랩 - 겹칠 수는 있음)
콜리전 프리셋이 이거저거 많은데 모든 오브젝트마다 타입이 정해져야한다, 커스터마이징도 할 수 있다
샘플에 있는 대부분의 것들은 충돌 데이터를 기본적으로 가지고 있다 

텍스처만 아니라 오브젝트도 디폴트로 올라갈 수가 있다 -> 이게 랜드스케이프 그래스 타입
디테일 가서 그래스 메시에서 어떤 메시를 뿌릴지 정하고 뭐 밀도도 정하고 
폴리지에서 안되고 머터리얼 편집에서 된다

머터리얼에서 그래스 아웃풋이랑 뭐시기 샘플 요 두개를 쓴다 
여기서도 Grass에 레이어A 레이어B 만들어논다 
(레이어)이름이 엄청나게 중요하다
샘플도 이름을 같게(레이어A, 레이어B) 해서 Grass에 연결해놓고
아무튼 대충 이렇게 하면 레이어A에 해당 땅 텍스처뿐 아니라 방금 연결해놓은 Grass도 뿌려진다


또 뭐시기가 있다
랜드스케이프 레이어 포함 & 랜드스케이프 레이어 제외
특정 레이어만 포함할 수도 있고, 특정 레이어만 빼고 뿌릴 수도 있다
이 방법이 옛날에 가장 많이 사용한 방법  


하나만 더함, 실험단계 기능
랜드스케이프 하나 더만들고 
편집 -> 에디터 개인설정 -> 실험단계 기능 -> 절차적 폴리지
여따가 체크를 하면 절차적 폴리지 기능을 쓸수가 있다
이제 콘텐츠 브라우저에서 우클릭 -> 폴리지 -> 프로시저럴 폴리지 스포너  // 이게 새로 생긴다
뷰포트에 끌고오면 정육면체가 생기는데 일단 잔뜩 키워서 지형 다 먹도록 해봄
 
아무튼 이 스포너에다가 아까 올려놓은 오브젝트들을 선택을 해서
스포너 디테일 들어가서 폴리지 타입 뭐 일단 두개 추가해서 나무랑 꽃 하나씩 올려놓음
디테일 창에서 다시 시뮬레이션 누르면 올려놓은 것들이 깔린다 
실험기능이라 아직 레이어 구분 이런게 없는데, 블로킹 볼륨? 프로시절 폴리지 블로킹 볼륨 -> 여기에는 안깔린다 

요거 하나만 해놓고 갈게요 
-> 아 프로젝트 셋팅에서 맵&모드 가서 에디터 시작 맵 설정 	// 시작해요언리얼에서 봤던거다 

마켓플레이스에 두개정도 검색하면 엄청 많이 나온다
인피니티 블레이드 -> 이거저거 프리로 풀려있다
오픈 월드 데모 컬렉션 

아무튼 요기까지만 언리얼엔진을 좀 보고 -> 이말인즉슨 2시간남은 현시점에서 DX로 돌아가신다는 말씀이신가요? 세상에







언리얼 엔진에서 맵을 만드는 기능들 중 핵심적인 기능들을 DX로 만든 툴에서 구현해야 할 것

MFC 기본을 몇가지 좀 해야하는데, 리소스 파일 가서 보면 rc파일이랑 rc2파일이 있다 (같은 거에요)
열어보면 이거저거 있는데 가장 핵심이 메뉴, 메뉴에서 핵심이 메인프레임 (IDR_MAINFRAME)
도움말 옆에 빈자리에 지형툴이라고 만들고 그밑에 지형생성저장로드 뭐시기저시기 달아둠
이벤트가 붙지 않아서 아직은 비활성화, 이벤트가 붙으면 활성화된다
엑셀러레이터 가서 보면 단축키 할당된걸 볼수가있음, 아직 컨트롤+M은 없음 

아무튼 지형생성 우클릭 -> 이벤트 처리기 추가
클래스 목록에서 일?단 메인프레임 고르고 OnCreateMap이라고 쳐놓으면 같은 이름의 함수가 생성이 된다 
여기서 핵심적인 거 -> ID
리소스 헤더파일에 열어보면 ID가 다 붙어있다, 특별히 신경쓸 필욘 없고 자동으로 안겹치게 나온?다 
근데 내가 뭐가 뭔지 모르기때문에 ID_CreateMap으로 바꿔주면? 

그... 속성->이벤트 에서 오른쪽에거 클릭해서 막 해도 OnCreateMap같은걸 만들수있다 (ID이름 앞에 On이 붙은듯)

rc밑의 다이얼로그에다가 다이얼로그 삽입으로 대화창을 하나 맹글수있다 (이름? ID?도 우리가 바꿀 수 있고)
이놈의 속성에 가서 보면 대화창 편집 가능
캡션 -> 얘까 그 뭐써있는지 그런거임 


대화상자 입력을 관리해주는 클래스를 하나 만들꺼야 (TCreateMap) -> 어케하셨었지;
OncreateMap에서 방금만든 대화창을 띄울건데, 안에 코드를
TCreateMap mapDlg;
mapDlg.DoModal? -> 대화상자가 닫히기 전까지는 아무고토 못함 
모달리스는 대화상자 떠있어도 다른걸 할수있다 

입력란 우클릭 -> 변수 추가
범주에서 일단 값만 (입력된 값만 필요하다 라는뜻), 이름은 뭐 적당히 (m_iNumComponent) 이런식으로
이러면 대화상자 클래스 멤버로 방금 만든 변수가 붙어있다 
데이타가 왔다갔다 하는거 -> DoDataExchange 

확인버튼도 이벤트 처리기 추가 (어떤 클래스에 넣어도 되긴 하는데 지금은 메인프레임으로 보냄)
여까지왔으면 대화상자에 입력된 값을 가지고 지형생성해서 띄워라 이런 작업이 가능하다 
UpdateData(True) -> 에디터에 있는걸 갖고올래
UPdataData(False) -> 에디터의 변수를 채울래
요 두개만 알면 게임끝난다

대화창에 뭐 입력하고 확인누르면 방금 했던거 mapDlg.DoModal 끝나고 mapDlg에 입력창에 입력했던 문자열이 들어가있다

대화상자에 초기값을 부여해줄 수 있는 기능이 거시기 
방금 우리가 만든 클래스 (TCreateMap)가서 속성->OnInitDialog -> 재정의 
이러면 이제 변수들을 갖고와서 대입을 해줄수가 있다 
근데 아직 익스체인지가 안됐다? 그래서 UpdataData(False) 해놓아야..?
UpdateData에서 False랑 True -> 에디터에 있는걸 갖고올래 or 변수 채울래 이뜻

리소스로 다시 가서, 툴바로 가서 버튼을 추가할 수 잇다 (ID를 아까 그거랑 맞춰서)
메뉴가 기본, 거따가 몬가를 추가하는?것

에디터 대신에 뭐 콤보 박스 이런 걸 쓸 수도 있다, 얘는 변수가 아니라 컨트롤로 해봤음 -> 변수가 아니라 객체가 되었다 
객체 호출해서 .AddString 머 이런걸로 이거저거 넣으니까 콤보박스 선택지로 추가됨ㄷ
저러고 확인 누르면 객체의 뭐시기 안에 선택한 선택지의 값이 있을것?메이비 
GetCulSel? 이건가?

근데 그 뭐시기 DoModal하면 대화창이 닫힌다? 아무튼 대충 그런 이슈로 
콤보박스 쟤한테 범주로 변수 추가로 또 만들어 줄 수도 있?다
이래가 변수 갖고오니 값이 잘 온다~ 

DoModal 해놓으니까 불편하다, 그래서 다음시간엔 ModalLess? 로 바꿔서 위아래양옆 편한곳에 붙일 수 있도록 할것이다 
또 이거저거 할것인데, 일단 샘플로 몇개 올려놓으셨으니까 참고


리플렉션? -> 할당하지 않아도 그 클래스의 멤버를 내가 조회할 수 있는 시스템     ->  다른 언어에는 있는데 C++에는 없다, 그래서 얘 얘기는 왜나온거징; 
(어떤 멤버가 있고 어떤 함수가 있고 이런걸 조회할 수 있다는 뜻인듯)