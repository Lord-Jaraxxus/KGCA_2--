1/10(화) - 


어제 하다 만 그 뭐냐 에이싱크 셀렉트 암튼 그걸 이용해서 쓰레드를 안쓰고 오토매티칼리하게 돌아가게끔


FD_Write 메세지를 보냈다 -> 메세지를 보낸 소켓에 송신을 할 수 있다 (메세지를 보낸 소켓이 리시브할 준비가 되었다)

패킷리스트를 센드패킷리/리시브패킷리 이런식으로 구분을 할? 필요성이?
일케 패킷리스트를 이용하면 렉안걸리게끔 초당 몇십개만 처리해라 이런 스케쥴링이 가능해진다

(맞았나 안맞았나 대충 ㅡㄱ런) 판정이라는 건 무조건 서버에서 하는거임, 그러니까 그런거 다룰때는 어느정도 지연이 되어야한?다


넷프로세스가 리시브프로세스로 이름이 바뀌었다! 내 넷러너랑은 이제 완전히 이름이 달라짐ㅅㅂㅋㅋ

암튼 pre프레임에서 네트워크 처리(리시브)를 미리 하고, 샘플 프레임은 게임만 돌아가게끔 -> 결국 PreProcess가 되었따
비슷하게 센드 처리들은 렌더 다 끝나고 post렌더에서 해준다 (프레임 뒤여도 상관없지않음? 아님말고) -> 결국 PostProcess가 되었따
않해도 되긴 하는데 뭐 좀 직관적으로 볼 수 있응께?

게임코어에서 프리프레임 포스트프레임 프리프로세스 포스트프로세스 등등 갑자기 가상함수가 증식하는디
프레임/렌더랑 상관없이 쓰려고? 음흠흠 


패킷을 만들어내는 부분을 함수로 분리해서 MakePacket이라는 이름을 붙여줌 (여기저기서 쓰니꼐)
뎃 일단은 뺄게요..? 힝잉 -> 응 부활함~

센드 리시브 프로세스들이 이제 네트워크 클래스로 기어들어가버림.. 어? 따로생긴건가? 아닌가? 모르겠네ㅋㅋ

뎃.. 사이즈? 이제 시작주소의 크기를 넘겨줘야? 한다? 
char*로 모든걸 처리하지 않겠다는뜻인가? 머지? 세탁앱에 정신팔려서 놓쳐버렸네?
그.. 사이즈 관련해서 유니코드랑 멀티바이트랑 몬가 모몬가 더 있었는데.. 놓쳤어.. 음... 
아몰랑ㅋㅋ 코드보면대충알든몰루든하것지



샘플의 RecvProcess (패킷 분해해서 막 카는 그거) 이거를
콜백 시스템으로 바꾼?다? 특정 네트워크 이벤트가? 오면? 특정 함수가 호출되게끔? 

시작부터 함수포인터 ㅋㅋ 어지럽네
맵을 만들어서 패킷 종류마다 함수를 하나씩 매칭해서 넣어준다, 아 이런느낌이구나

cpp 새로 만들어서 callFunction이라고 함수전용 cpp 하나 만ㄷ름
어... 샘플로 가버리네 ㅋㅋ Print <-이놈때문에? 

암튼 해당하는 패킷이 올때마다 해당하는 함수를 처리하는 씨스템을 구축할수가잇다~



근데 저것도 올드한 방법임, 열심히 만들었지만 주석해버림ㄷㄷ
똑같은 걸 만들건데 모던C++로 바꿀거임

함수포인터랑 동일한 stl이 있다(function) 이걸 쓸거임ㄷ
근데 이거는 주소값을 직접 넣을수가 없음, 대신 std::bind 이걸 사용하면 된다
이제 서로 다른 클래스의 함수를 넣을수가있다 (네트워크로 갈 수도 있다)
플레이스홀더..? 함수 인자값,, 에 관련된거같은데,, 음,,  


셀렉트의 장점?
이벤트 통지를 뭐시기할 필요가 없다? 
실시간 비교할 필요가 없다

지금 하고있는거 : 비동기 통지 / 동기 입출력 

비동기 입출력이 다음 과제임
그래서 비동기 입출력이 뭘까? 그러게요 그뭔씹

동기 : 청소 시키고 청소 다할때까지 지켜보고있는거
비동기 : 청소 시키고 나는 딴작업하러 가는거

쓰레드는 아닌데 쓰레드처럼 쓸 수 있는 버퍼가 따로 있다.. 음..


윈도우 프로시저를 사용 안할거임, ??? ?????  왜죠? 무엇을암시하는것이지?

클라에서는 에이싱크 셀렉트를 써야하는데
서버에서는 셀렉트나 그런걸 써야?함?


아무튼 셀렉트는 서버에서 많이 쓴다
그러므로 서버를 구현하러감ㅋ

FD_SET.. -> 소켓 배열

셀렉트는 초기화->작업->지우기 무조건 ㅐㅎ줘야한다

ISSET이면 accpept 해준?다?  아 졸려디지겠어서뭐가귀에안들오ㅓ오느데



잤어...



그... 셀렉트로 서버를 만들어따 라는 결론이 도출되는거겠죠?


+a로 지금은 대충 만들어놓긴 했는데
서버는 동적 생성&삭제(뉴 딜리트)를 하면 안된다 (단편화일어나고막그럼)
그래서 메모리 풀?이 있어야한다?

핵심 : 카피 복사의 근본적인 원인인 메모리 생성과 삭제(뉴딜리트)
그래서 서버 시작하면 메모리를 미리 만들어놓고 들어간다
유저 들어오면 빈방 하나 준다




암튼 오늘꺼 요약.... 하자면..

1. 에이싱크 셀렉트로 클라 돌아가게끔 완?성
2. 콜백 시스템으로 패킷 처리할 수 있게끔
3. (스탠다드)셀렉트로 서버를 만듬 (잤어.... 선생님 피셜로는 손질 좀 해야함)























